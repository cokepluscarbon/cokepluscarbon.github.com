<!DOCTYPE HTML>
<html lang="zh_CN">
<head>
	<meta charset="UTF-8">
	<title>04 Linear vertical motion</title>
	<link rel="stylesheet" href="styles/style.css" />
	<script type="text/javascript" src="javascripts/utils.js"></script>
	<script type="text/javascript" src="javascripts/ball.js"></script>
</head>
<body>
	<canvas id="canvas" width="800" height="450">Your broswer not support canvas!</canvas>
	<script type="text/javascript">
	/*
	 * 画一个小球，然后让小球上下摆动同时向右移动
	 */
	window.onload = function() {
		var canvas = document.getElementById('canvas'),
			context = canvas.getContext('2d'),
			ball = new Ball(),
			xSpeed = 200 / 60, // 1秒移动200
			ySpeed = Math.PI / 60, // 两秒来回一次
			range = 100, // 波动幅度
			angle = 0;
		
		ball.x = 0;
		ball.y = canvas.height / 2;
		
		(function drawFrame(){ // 自调用函数
			window.requestAnimationFrame(drawFrame, canvas); 
			context.clearRect(0, 0, canvas.width, canvas.height);
			
			/*
			 * sinθ 随着角度增加而在x轴上下波动，我们可以利用这个特征
			 */
			angle += ySpeed;
			ball.x += xSpeed;
			ball.y = canvas.height / 2 + range * Math.sin(angle); // 摆动的幅度为上下100
			
			ball.draw(context);
		}());
	}
	</script>
</body>
</html>